{% extends "base.html" %}

{% block content %}

<!-- Hero Section -->
<section id="hero">
    <div id="animation-container"> <!-- Renamed from 'container' -->
        <canvas id="neuron-animation"></canvas> <!-- Canvas Animation -->
        <div class="content">
            <h1 class="display-3 fw-bold">Hi, I'm <span class="text-warning">Matthew</span></h1>
            <p class="lead">Genome Analyst | Bioinformatician | Web Developer</p>
            <div class="icon-links d-flex justify-content-center mt-4">
                <a href="https://www.linkedin.com/in/matthewlyf/" target="_blank">
                    <img src="{{ url_for('static', filename='img/linkedin.png') }}" alt="LinkedIn" width="40">
                </a>
                <a href="https://github.com/matthewlyf" target="_blank">
                    <img src="{{ url_for('static', filename='img/git.png') }}" alt="GitHub" width="40">
                </a>
            </div>
            <a href="#about" class="btn btn-outline-warning btn-lg mt-4">Learn More</a>
        </div>
    </div>
</section>

<!-- About Section -->
<section id="about" class="py-5 bg-light">
    <div class="container">
        <!-- About Me Header -->
        <div class="text-center mb-5">
            <h2 class="fw-bold">About Me</h2>
        </div>

        <!-- About Me Content -->
        <div class="row align-items-center">
            <div class="col-md-12">
                <p class="text-muted mx-auto" style="max-width: 800px;">
                    I am a <strong>Genome Analyst</strong> and <strong>Bioinformatics Professional</strong> with over 
                    7 years of experience in <strong>genomic data analysis</strong>, <strong>variant interpretation</strong>, 
                    and <strong>healthcare analytics</strong>. My career began in the wet lab, where I mastered molecular biology techniques 
                    and DNA sequencing at institutions like the <strong>Clinical Genomics Centre</strong> and <strong>The Centre for Applied Genomics</strong>. 
                    This hands-on experience provided a strong foundation in genomic research and clinical diagnostics.
                </p>
                <p class="text-muted mx-auto" style="max-width: 800px;">
                    Building on this foundation, I transitioned into variant interpretation at the <strong>Laboratory Medicine Programs</strong> 
                    at <strong>UHN</strong> and <strong>Hamilton Health Sciences</strong>, analyzing complex genetic data to support clinical decision-making. 
                    To address the increasing complexity of genomic datasets, I expanded my expertise into <strong>bioinformatics</strong> and 
                    <strong>programming</strong>. Proficient in <strong>Python</strong>, <strong>Flask</strong>, and <strong>MongoDB</strong>, I have developed custom pipelines 
                    and web-based tools to streamline workflows, enhance data visualization, and improve data accessibility.
                </p>
                <p class="text-muted mx-auto" style="max-width: 800px;">
                    Today, I bring a unique blend of wet lab expertise, variant interpretation proficiency, and technical skills to deliver innovative, 
                    data-driven solutions in genomics. My passion lies in leveraging technology to optimize genomic workflows and advance healthcare outcomes.
                </p>
            </div>
        </div>

        <!-- Skills and Technologies Section -->
        <div class="skills-grid mb-5">
            <h3 class="fw-bold text-center mb-4">Skills and Technologies</h3>

            <!-- Programming Section -->
            <h4 class="fw-bold text-center">Programming</h4>
            <div class="row text-center mb-4">
                <div class="col-md-3 col-sm-6 mb-4">
                    <img src="{{ url_for('static', filename='img/aboutme/python.png') }}" alt="Python" class="img-fluid skill-logo">
                </div>
                <div class="col-md-3 col-sm-6 mb-4">
                    <img src="{{ url_for('static', filename='img/aboutme/flask.png') }}" alt="Flask" class="img-fluid skill-logo">
                </div>
                <div class="col-md-3 col-sm-6 mb-4">
                    <img src="{{ url_for('static', filename='img/aboutme/mongodb.png') }}" alt="MongoDB" class="img-fluid skill-logo">
                </div>
                <div class="col-md-3 col-sm-6 mb-4">
                    <img src="{{ url_for('static', filename='img/aboutme/html.png') }}" alt="HTML/CSS" class="img-fluid skill-logo">
                </div>
            </div>

            <!-- Bioinformatics and Genomics Section -->
            <h4 class="fw-bold text-center">Bioinformatics and Genomics</h4>
            <div class="row text-center">
                <div class="col-md-3 col-sm-6 mb-4">
                    <img src="{{ url_for('static', filename='img/aboutme/illumina.png') }}" alt="Illumina" class="img-fluid skill-logo">
                </div>
                <div class="col-md-3 col-sm-6 mb-4">
                    <img src="{{ url_for('static', filename='img/aboutme/nanopore.png') }}" alt="Oxford Nanopore" class="img-fluid skill-logo">
                </div>
                <div class="col-md-3 col-sm-6 mb-4">
                    <img src="{{ url_for('static', filename='img/aboutme/pacbio.png') }}" alt="PacBio" class="img-fluid skill-logo">
                </div>
                <div class="col-md-3 col-sm-6 mb-4">
                    <img src="{{ url_for('static', filename='img/aboutme/10xgenomics.png') }}" alt="10x Genomics" class="img-fluid skill-logo">
                </div>
                <div class="col-md-3 col-sm-6 mb-4">
                    <img src="{{ url_for('static', filename='img/aboutme/softgenetics.png') }}" alt="SoftGenetics" class="img-fluid skill-logo">
                </div>
            </div>
        </div>

        <!-- Divider -->
        <hr class="my-5">

        <!-- Institutes Section -->
        <div class="institutes-grid">
            <h3 class="fw-bold text-center mb-4">Institutes I've Worked At</h3>
            <div class="row text-center">
                <div class="col-md-3 col-sm-6 mb-4">
                    <a href="https://www.uhn.ca/Labs/Clinical_Laboratory_Genetics" target="_blank">
                        <img src="{{ url_for('static', filename='img/aboutme/uhn.png') }}" alt="UHN" class="img-fluid institute-logo">
                    </a>
                </div>
                <div class="col-md-3 col-sm-6 mb-4">
                    <a href="https://www.hamiltonhealthsciences.ca/areas-of-care/services/laboratory/hrlmp-genetics/" target="_blank">
                        <img src="{{ url_for('static', filename='img/aboutme/hhs.png') }}" alt="Hamilton Health Sciences" class="img-fluid institute-logo">
                    </a>
                </div>
                <div class="col-md-3 col-sm-6 mb-4">
                    <a href="https://www.clinicalgenomics.ca/" target="_blank">
                        <img src="{{ url_for('static', filename='img/aboutme/cgc.png') }}" alt="Clinical Genomics Centre" class="img-fluid institute-logo">
                    </a>
                </div>
                <div class="col-md-3 col-sm-6 mb-4">
                    <a href="https://www.tcag.ca" target="_blank">
                        <img src="{{ url_for('static', filename='img/aboutme/tcag.png') }}" alt="The Centre for Applied Genomics" class="img-fluid institute-logo">
                    </a>
                </div>
            </div>
        </div>

    </div>
</section>






<!-- Projects Section -->
<section id="projects" class="py-5 bg-dark text-light">
    <div class="container">
        <h2 class="text-center fw-bold mb-4">My Projects</h2>
        <div class="custom-carousel">
            <div class="carousel-items">
                {% for project in projects %}
                <div class="carousel-item {% if loop.first %}active{% endif %}">
                    <div class="row align-items-center">
                        <!-- Project Details -->
                        <div class="col-md-6 col-sm-12 mb-4">
                            <h3 class="fw-bold text-light text-center text-md-start">{{ project.title }}</h3>
                            <p class="text-light text-center text-md-start">{{ project.description }}</p>
                            <p class="text-light text-center text-md-start">
                                <strong>Technologies:</strong> {{ project.technologies }}
                            </p>
                            <div class="d-flex justify-content-center justify-content-md-start">
                                {% if project.live_link %}
                                <a href="{{ project.live_link }}" class="btn btn-primary me-2" target="_blank">Live App</a>
                                {% endif %}
                                {% if project.github_link %}
                                <a href="{{ project.github_link }}" class="btn btn-outline-light" target="_blank">Learn More</a>
                                {% endif %}
                            </div>
                        </div>
                        <!-- Project Images/Code -->
                        <div class="col-md-6">
                            <div id="carousel{{ loop.index }}" class="carousel slide shadow rounded" data-bs-ride="carousel">
                                <div class="carousel-inner">
                                    {% for item in project.carousel_items %}
                                    <div class="carousel-item {% if loop.first %}active{% endif %}">
                                        {% if item.type == "image" %}
                                        <img src="{{ item.src }}" class="d-block w-100 mb-3" alt="{{ item.alt }}">
                                        {% elif item.type == "code" %}
                                        <pre class="bg-light text-dark p-3 rounded shadow"><code>{{ item.content }}</code></pre>
                                        {% elif item.type == "text" %}
                                        <div class="text-content p-3">
                                            <p class="bg-light text-dark p-3 rounded shadow">{{ item.content }}</p>
                                        </div>
                                        {% endif %}
                                    </div>
                                    {% endfor %}
                                </div>
                                <!-- Inner Carousel Controls -->
                                <button class="carousel-control-prev" type="button" data-bs-target="#carousel{{ loop.index }}" data-bs-slide="prev">
                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                    <span class="visually-hidden">Previous</span>
                                </button>
                                <button class="carousel-control-next" type="button" data-bs-target="#carousel{{ loop.index }}" data-bs-slide="next">
                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                    <span class="visually-hidden">Next</span>
                                </button>
                            </div>
                        </div>

                                <!-- Inner Carousel Controls -->
                                <button class="carousel-control-prev" type="button" data-bs-target="#carousel{{ loop.index }}" data-bs-slide="prev">
                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                    <span class="visually-hidden">Previous</span>
                                </button>
                                <button class="carousel-control-next" type="button" data-bs-target="#carousel{{ loop.index }}" data-bs-slide="next">
                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                    <span class="visually-hidden">Next</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>

        <!-- Outer Controls Below Cards -->
        <div class="d-flex carousel-controls mt-4">
            <button id="prevBtn" class="btn" type="button" data-bs-target="#projectsCarousel" data-bs-slide="prev">
                Previous
            </button>
            <button id="nextBtn" class="btn" type="button" data-bs-target="#projectsCarousel" data-bs-slide="next">
                Next
            </button>
        </div>
    </div>
</section>


<!-- Publications Section -->
<section id="publications" class="py-5 bg-light">
    <div class="container">
        <h2 class="text-center fw-bold mb-4">My Publications</h2>
        <div id="publicationsCarousel" class="carousel slide" data-bs-ride="carousel">
            <!-- Carousel Items -->
            <div class="carousel-inner">
                {% for publication in publications %}
                <div class="carousel-item {% if loop.first %}active{% endif %}">
                    <div class="row justify-content-center">
                        <div class="col-md-8">
                            <div class="card bg-white text-dark shadow">
                                <div class="card-body">
                                    <h5 class="card-title">{{ publication.title }}</h5>
                                    <p class="card-text">
                                        <strong>Authors:</strong> {{ publication.authors }}<br>
                                        <strong>Journal:</strong> {{ publication.journal }}<br>
                                        <strong>Date:</strong> {{ publication.date }}
                                    </p>
                                    <p class="text-muted">{{ publication.abstract }}</p>
                                    <a href="{{ publication.link }}" class="btn btn-primary" target="_blank">Read Full Text</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>

            <!-- Outer Controls -->
            <div class="d-flex carousel-controls">
                <button class="btn" type="button" data-bs-target="#publicationsCarousel" data-bs-slide="prev">
                    Previous
                </button>
                <button class="btn" type="button" data-bs-target="#publicationsCarousel" data-bs-slide="next">
                    Next
                </button>
            </div>
        </div>
    </div>
</section>




<script>
console.log("JavaScript is loaded!");
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        e.preventDefault();
        document.querySelector(this.getAttribute('href')).scrollIntoView({
            behavior: 'smooth'
        });
    });
});

document.addEventListener("DOMContentLoaded", () => {
    const items = document.querySelectorAll(".custom-carousel > .carousel-items > .carousel-item"); // Outer carousel items
    let currentIndex = 0; // Track the currently active project
    let autoSlideInterval; // To store the auto-slide interval

    // Helper function to update the active item
    const updateActiveItem = (newIndex) => {
        items.forEach((item, index) => {
            item.classList.toggle("active", index === newIndex); // Toggle active class
        });
    };

    // Function to start auto-slide
    const startAutoSlide = () => {
        autoSlideInterval = setInterval(() => {
            currentIndex = (currentIndex + 1) % items.length; // Move to the next project
            updateActiveItem(currentIndex);
            console.log(`Auto-slide, currentIndex: ${currentIndex}`);
        }, 10000); // 5 seconds
    };

    // Function to stop auto-slide (useful if manual navigation temporarily halts it)
    const stopAutoSlide = () => {
        clearInterval(autoSlideInterval);
    };

    // Handle "Previous" button click
    document.getElementById("prevBtn").addEventListener("click", () => {
        stopAutoSlide(); // Optional: Pause auto-slide on manual navigation
        currentIndex = (currentIndex - 1 + items.length) % items.length; // Wrap around to the last project
        updateActiveItem(currentIndex);
        console.log(`Previous button clicked, currentIndex: ${currentIndex}`);
        startAutoSlide(); // Restart auto-slide
    });

    // Handle "Next" button click
    document.getElementById("nextBtn").addEventListener("click", () => {
        stopAutoSlide(); // Optional: Pause auto-slide on manual navigation
        currentIndex = (currentIndex + 1) % items.length; // Wrap around to the first project
        updateActiveItem(currentIndex);
        console.log(`Next button clicked, currentIndex: ${currentIndex}`);
        startAutoSlide(); // Restart auto-slide
    });

    // Start the auto-slide on page load
    startAutoSlide();
});

</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js"></script>
<script>
    let nodes = []; // Array to hold neuron nodes
    let connectionDistance = 200; // Connection range
    let nodeSpeed = 0.75; // Node movement speed
    let canvas;
    let cursorNode; // Cursor node for interaction

    function setup() {
        if (!canvas) {
            // Create the canvas and attach it to the #animation-container
            canvas = createCanvas(windowWidth, windowHeight);
            canvas.parent("animation-container"); // Attach canvas to the container
            canvas.style("position", "absolute"); // Ensure proper layering
            canvas.style("top", "0");
            canvas.style("left", "0");
            canvas.style("z-index", "1");
            canvas.style("pointer-events", "none"); // Avoid interaction issues
        }

        noStroke();

        // Dynamically set maxNodes based on canvas size
        let canvasArea = width * height;
        let density = 0.0001; // Adjust density to control the number of nodes
        let maxNodes = Math.floor(canvasArea * density);

        // Initialize nodes
        nodes = []; // Clear nodes on setup
        for (let i = 0; i < maxNodes; i++) {
            nodes.push(new Node(random(width), random(height)));
        }

        // Initialize the cursor node
        cursorNode = new Node(mouseX, mouseY);
    }

    function draw() {
        clear(); // Clear the canvas for smooth animation
        background(0, 0, 0, 0); // Transparent background

        fill(255, 150);
        for (let node of nodes) {
            node.update();
            node.display();
        }

        // Update the cursor node to follow the mouse
        cursorNode.x = mouseX;
        cursorNode.y = mouseY;
        cursorNode.display();

        for (let i = 0; i < nodes.length; i++) {
            for (let j = i + 1; j < nodes.length; j++) {
                let d = dist(nodes[i].x, nodes[i].y, nodes[j].x, nodes[j].y);

                if (d < connectionDistance) {
                    // Calculate opacity based on distance
                    let alpha = map(d, 0, connectionDistance, 255, 50); // Gradually fade based on distance

                    // Set the stroke color with adjusted opacity
                    if (d < connectionDistance / 3) {
                        stroke(255, 255, 255, alpha); // Bright white for close connections
                    } else if (d < (2 * connectionDistance) / 3) {
                        stroke(200, 200, 200, alpha); // Mid-range connections
                    } else {
                        stroke(150, 150, 150, alpha); // Faint white for far connections
                    }

                    strokeWeight(1); // Thin line for connections
                    line(nodes[i].x, nodes[i].y, nodes[j].x, nodes[j].y);
                }
            }

            // Connect the cursor node to other nodes
            let dCursor = dist(cursorNode.x, cursorNode.y, nodes[i].x, nodes[i].y);
            if (dCursor < connectionDistance) {
                let alphaCursor = map(dCursor, 0, connectionDistance, 255, 50); // Adjust opacity
                stroke(255, 255, 255, alphaCursor); // Bright white for cursor connections
                strokeWeight(2); // Slightly thicker line for cursor interaction
                line(cursorNode.x, cursorNode.y, nodes[i].x, nodes[i].y);
            }
        }
    }

    function windowResized() {
        resizeCanvas(windowWidth, windowHeight); // Keep the canvas responsive
        setup(); // Recalculate maxNodes and reinitialize nodes
    }

    // Node class
    class Node {
        constructor(x, y) {
            this.x = x;
            this.y = y;
            this.vx = random(-nodeSpeed, nodeSpeed);
            this.vy = random(-nodeSpeed, nodeSpeed);
        }

        update() {
            this.x += this.vx;
            this.y += this.vy;

            // Bounce off edges
            if (this.x < 0 || this.x > width) this.vx *= -1;
            if (this.y < 0 || this.y > height) this.vy *= -1;
        }

        display() {
            ellipse(this.x, this.y, 8, 8);
        }
    }
</script>



</body>
{% endblock %}
